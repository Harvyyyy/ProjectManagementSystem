{"ast":null,"code":"var _jsxFileName = \"D:\\\\Harvy\\\\Dev\\\\ProjectManagementSystem\\\\frontend\\\\src\\\\components\\\\Notifications\\\\NotificationBell.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Dropdown, Badge, Spinner, ListGroup, Button, Alert } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom'; // Removed unused Link\nimport { useAuth } from '../../context/AuthContext'; // Adjust path\nimport { API_BASE_URL } from '../../App'; // Adjust path\nimport { formatDate } from '../../utils/formatting'; // Adjust path\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NotificationBell() {\n  _s();\n  const {\n    token\n  } = useAuth();\n  const navigate = useNavigate();\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isOpen, setIsOpen] = useState(false); // Manage dropdown visibility\n\n  const fetchNotifications = useCallback(async (fetchType = 'unread') => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      var _data$meta$unread_cou, _data$meta;\n      // Fetch notifications (unread or all)\n      const response = await fetch(`${API_BASE_URL}/notifications?status=${fetchType}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: 'application/json'\n        }\n      });\n\n      // Check for HTTP errors first\n      if (!response.ok) {\n        // Try to get a specific message from backend error response if possible\n        let errorMsg = `HTTP error ${response.status}`;\n        try {\n          const errData = await response.json(); // Attempt to parse potential error JSON\n          errorMsg = errData.message || errorMsg;\n        } catch (parseError) {\n          // If response wasn't JSON, use the original HTTP error\n          console.warn(\"Could not parse error response as JSON\");\n        }\n        throw new Error(errorMsg); // Throw error to be caught below\n      }\n\n      // If response is OK, try to parse JSON\n      const data = await response.json();\n      console.log(\"Notifications Data Received:\", data); // DEBUG\n\n      // Process successful response (expecting pagination structure)\n      setNotifications(data.data || []); // Use data array from paginator\n      setUnreadCount((_data$meta$unread_cou = (_data$meta = data.meta) === null || _data$meta === void 0 ? void 0 : _data$meta.unread_count) !== null && _data$meta$unread_cou !== void 0 ? _data$meta$unread_cou : 0); // Get unread count from meta\n    } catch (err) {\n      // Catch errors from fetch, !response.ok, or response.json()\n      console.error(\"Failed to fetch notifications:\", err);\n      setError(\"Couldn't load notifications.\"); // Set user-facing error\n      setUnreadCount(0); // Reset count on error\n      setNotifications([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [token]);\n\n  // Initial fetch and potentially periodic refresh\n  useEffect(() => {\n    fetchNotifications('unread'); // Fetch initial unread count\n    // Optional: Setup polling interval\n  }, [fetchNotifications]);\n  const handleToggle = nextShowState => {\n    setIsOpen(nextShowState);\n    // Fetch all notifications when dropdown is opened\n    if (nextShowState) {\n      fetchNotifications('all');\n    }\n  };\n  const handleMarkAsRead = async (notificationId, e) => {\n    e.stopPropagation();\n    const targetNotification = notifications.find(n => n.id === notificationId);\n    if (!targetNotification || targetNotification.read_at) return;\n\n    // Optimistic UI update\n    setNotifications(prev => prev.map(n => n.id === notificationId ? {\n      ...n,\n      read_at: new Date().toISOString()\n    } : n));\n    setUnreadCount(prev => Math.max(0, prev - 1));\n    try {\n      const response = await fetch(`${API_BASE_URL}/notifications/${notificationId}/read`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to mark as read on server');\n      }\n      // Optionally re-fetch on success if optimistic update fails sometimes\n      // fetchNotifications(isOpen ? 'all' : 'unread');\n    } catch (err) {\n      console.error(\"Failed to mark notification as read:\", err);\n      setError(\"Failed to update notification status.\");\n      // Revert optimistic UI update on error\n      setNotifications(prev => prev.map(n => n.id === notificationId ? {\n        ...n,\n        read_at: null\n      } : n));\n      setUnreadCount(prev => prev + 1);\n    }\n  };\n  const handleNotificationClick = (notification, e) => {\n    var _notification$data;\n    if (!notification.read_at) {\n      handleMarkAsRead(notification.id, e);\n    }\n    if ((_notification$data = notification.data) !== null && _notification$data !== void 0 && _notification$data.url) {\n      navigate(notification.data.url);\n      setIsOpen(false);\n    }\n  };\n\n  // Custom Dropdown Toggle Component\n  const CustomToggle = /*#__PURE__*/React.forwardRef(({\n    children,\n    onClick\n  }, ref) => /*#__PURE__*/_jsxDEV(Button, {\n    ref: ref,\n    onClick: e => {\n      e.preventDefault();\n      onClick(e);\n    },\n    variant: \"dark\",\n    className: \"position-relative border-0 p-0 me-2\",\n    \"aria-label\": \"Notifications\",\n    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"bi bi-bell-fill text-white fs-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(Badge, {\n      pill: true,\n      bg: \"danger\",\n      className: \"position-absolute top-0 start-100 translate-middle\",\n      style: {\n        fontSize: '0.6em',\n        padding: '0.3em 0.5em'\n      },\n      children: [\" \", unreadCount > 9 ? '9+' : unreadCount, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\",\n        children: \"unread notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 210\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(Dropdown, {\n    onToggle: handleToggle,\n    show: isOpen,\n    align: \"end\",\n    children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n      as: CustomToggle,\n      id: \"dropdown-custom-components\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n      variant: \"dark\",\n      className: \"shadow mt-2 dropdown-menu-scrollable\",\n      style: {\n        minWidth: '300px',\n        maxHeight: '400px',\n        overflowY: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Dropdown.Header, {\n        className: \"d-flex justify-content-between align-items-center\",\n        children: \" Notifications \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 10\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center p-3 text-muted\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          size: \"sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 68\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 24\n      }, this), error && !isLoading && /*#__PURE__*/_jsxDEV(Dropdown.ItemText, {\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          size: \"sm\",\n          className: \"mb-0\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 34\n      }, this), !isLoading && !error && notifications.length === 0 && /*#__PURE__*/_jsxDEV(Dropdown.ItemText, {\n        className: \"text-muted text-center p-3\",\n        children: \"No new notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 67\n      }, this), !isLoading && !error && notifications.length > 0 && /*#__PURE__*/_jsxDEV(ListGroup, {\n        variant: \"flush\",\n        children: notifications.map(notification => {\n          var _notification$data2;\n          return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            action: true,\n            onClick: e => handleNotificationClick(notification, e),\n            className: `bg-dark text-light border-secondary px-3 py-2 ${!notification.read_at ? 'bg-opacity-75 fw-bold notification-unread' : 'notification-read'}`,\n            style: {\n              cursor: 'pointer',\n              opacity: !notification.read_at ? 1 : 0.7\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-start\",\n              children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                style: {\n                  fontSize: '0.9em',\n                  marginRight: '5px'\n                },\n                children: [\" \", ((_notification$data2 = notification.data) === null || _notification$data2 === void 0 ? void 0 : _notification$data2.message) || 'Notification message missing.', \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 28\n              }, this), !notification.read_at && /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline-secondary\",\n                size: \"sm\",\n                className: \"ms-auto border-0 flex-shrink-0\",\n                style: {\n                  lineHeight: '1',\n                  padding: '0.1rem 0.3rem'\n                },\n                onClick: e => handleMarkAsRead(notification.id, e),\n                title: \"Mark as read\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 275\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 57\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 24\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"d-block text-muted\",\n              style: {\n                fontSize: '0.75em'\n              },\n              children: [\" \", formatDate(notification.created_at, {\n                dateStyle: 'short',\n                timeStyle: 'short'\n              }), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 24\n            }, this)]\n          }, notification.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 22\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n_s(NotificationBell, \"QgVOi2Dd6d6fVwwELrP7FoUANlU=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = NotificationBell;\nexport default NotificationBell;\nvar _c;\n$RefreshReg$(_c, \"NotificationBell\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Dropdown","Badge","Spinner","ListGroup","Button","Alert","useNavigate","useAuth","API_BASE_URL","formatDate","jsxDEV","_jsxDEV","NotificationBell","_s","token","navigate","notifications","setNotifications","unreadCount","setUnreadCount","isLoading","setIsLoading","error","setError","isOpen","setIsOpen","fetchNotifications","fetchType","_data$meta$unread_cou","_data$meta","response","fetch","headers","Authorization","Accept","ok","errorMsg","status","errData","json","message","parseError","console","warn","Error","data","log","meta","unread_count","err","handleToggle","nextShowState","handleMarkAsRead","notificationId","e","stopPropagation","targetNotification","find","n","id","read_at","prev","map","Date","toISOString","Math","max","method","handleNotificationClick","notification","_notification$data","url","CustomToggle","forwardRef","children","onClick","ref","preventDefault","variant","className","fileName","_jsxFileName","lineNumber","columnNumber","pill","bg","style","fontSize","padding","onToggle","show","align","Toggle","as","Menu","minWidth","maxHeight","overflowY","Header","Divider","animation","size","ItemText","length","_notification$data2","Item","action","cursor","opacity","marginRight","lineHeight","title","created_at","dateStyle","timeStyle","_c","$RefreshReg$"],"sources":["D:/Harvy/Dev/ProjectManagementSystem/frontend/src/components/Notifications/NotificationBell.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Dropdown, Badge, Spinner, ListGroup, Button, Alert } from 'react-bootstrap';\r\nimport { useNavigate } from 'react-router-dom'; // Removed unused Link\r\nimport { useAuth } from '../../context/AuthContext'; // Adjust path\r\nimport { API_BASE_URL } from '../../App'; // Adjust path\r\nimport { formatDate } from '../../utils/formatting'; // Adjust path\r\n\r\nfunction NotificationBell() {\r\n  const { token } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isOpen, setIsOpen] = useState(false); // Manage dropdown visibility\r\n\r\n  const fetchNotifications = useCallback(async (fetchType = 'unread') => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      // Fetch notifications (unread or all)\r\n      const response = await fetch(`${API_BASE_URL}/notifications?status=${fetchType}`, {\r\n        headers: { Authorization: `Bearer ${token}`, Accept: 'application/json' },\r\n      });\r\n\r\n      // Check for HTTP errors first\r\n      if (!response.ok) {\r\n        // Try to get a specific message from backend error response if possible\r\n        let errorMsg = `HTTP error ${response.status}`;\r\n         try {\r\n            const errData = await response.json(); // Attempt to parse potential error JSON\r\n            errorMsg = errData.message || errorMsg;\r\n         } catch (parseError) {\r\n            // If response wasn't JSON, use the original HTTP error\r\n            console.warn(\"Could not parse error response as JSON\");\r\n         }\r\n        throw new Error(errorMsg); // Throw error to be caught below\r\n      }\r\n\r\n      // If response is OK, try to parse JSON\r\n      const data = await response.json();\r\n      console.log(\"Notifications Data Received:\", data); // DEBUG\r\n\r\n      // Process successful response (expecting pagination structure)\r\n      setNotifications(data.data || []); // Use data array from paginator\r\n      setUnreadCount(data.meta?.unread_count ?? 0); // Get unread count from meta\r\n\r\n    } catch (err) { // Catch errors from fetch, !response.ok, or response.json()\r\n      console.error(\"Failed to fetch notifications:\", err);\r\n      setError(\"Couldn't load notifications.\"); // Set user-facing error\r\n      setUnreadCount(0); // Reset count on error\r\n      setNotifications([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [token]);\r\n\r\n  // Initial fetch and potentially periodic refresh\r\n  useEffect(() => {\r\n    fetchNotifications('unread'); // Fetch initial unread count\r\n    // Optional: Setup polling interval\r\n  }, [fetchNotifications]);\r\n\r\n  const handleToggle = (nextShowState) => {\r\n     setIsOpen(nextShowState);\r\n     // Fetch all notifications when dropdown is opened\r\n     if (nextShowState) {\r\n          fetchNotifications('all');\r\n     }\r\n  };\r\n\r\n  const handleMarkAsRead = async (notificationId, e) => {\r\n      e.stopPropagation();\r\n      const targetNotification = notifications.find(n => n.id === notificationId);\r\n      if (!targetNotification || targetNotification.read_at) return;\r\n\r\n      // Optimistic UI update\r\n      setNotifications(prev => prev.map(n => n.id === notificationId ? { ...n, read_at: new Date().toISOString() } : n));\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n\r\n      try {\r\n          const response = await fetch(`${API_BASE_URL}/notifications/${notificationId}/read`, {\r\n              method: 'POST',\r\n              headers: { Authorization: `Bearer ${token}`, Accept: 'application/json', 'Content-Type': 'application/json' },\r\n          });\r\n          if (!response.ok) { throw new Error('Failed to mark as read on server'); }\r\n          // Optionally re-fetch on success if optimistic update fails sometimes\r\n          // fetchNotifications(isOpen ? 'all' : 'unread');\r\n      } catch (err) {\r\n          console.error(\"Failed to mark notification as read:\", err);\r\n          setError(\"Failed to update notification status.\");\r\n          // Revert optimistic UI update on error\r\n          setNotifications(prev => prev.map(n => n.id === notificationId ? { ...n, read_at: null } : n));\r\n          setUnreadCount(prev => prev + 1);\r\n      }\r\n  };\r\n\r\n  const handleNotificationClick = (notification, e) => {\r\n    if (!notification.read_at) { handleMarkAsRead(notification.id, e); }\r\n    if (notification.data?.url) { navigate(notification.data.url); setIsOpen(false); }\r\n  };\r\n\r\n  // Custom Dropdown Toggle Component\r\n  const CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n    <Button ref={ref} onClick={(e) => { e.preventDefault(); onClick(e); }} variant=\"dark\" className=\"position-relative border-0 p-0 me-2\" aria-label=\"Notifications\">\r\n      <i className=\"bi bi-bell-fill text-white fs-5\"></i>\r\n      {unreadCount > 0 && ( <Badge pill bg=\"danger\" className=\"position-absolute top-0 start-100 translate-middle\" style={{ fontSize: '0.6em', padding: '0.3em 0.5em' }}> {unreadCount > 9 ? '9+' : unreadCount} <span className=\"visually-hidden\">unread notifications</span> </Badge> )}\r\n    </Button>\r\n  ));\r\n\r\n  return (\r\n    <Dropdown onToggle={handleToggle} show={isOpen} align=\"end\">\r\n      <Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\" />\r\n      <Dropdown.Menu variant=\"dark\" className=\"shadow mt-2 dropdown-menu-scrollable\" style={{minWidth: '300px', maxHeight: '400px', overflowY: 'auto'}}>\r\n         <Dropdown.Header className=\"d-flex justify-content-between align-items-center\"> Notifications </Dropdown.Header>\r\n         <Dropdown.Divider />\r\n         {isLoading && <div className=\"text-center p-3 text-muted\"><Spinner animation=\"border\" size=\"sm\" /></div>}\r\n         {error && !isLoading && <Dropdown.ItemText><Alert variant=\"danger\" size=\"sm\" className=\"mb-0\">{error}</Alert></Dropdown.ItemText>}\r\n         {!isLoading && !error && notifications.length === 0 && ( <Dropdown.ItemText className=\"text-muted text-center p-3\">No new notifications</Dropdown.ItemText> )}\r\n         {!isLoading && !error && notifications.length > 0 && (\r\n             <ListGroup variant=\"flush\">\r\n                 {notifications.map(notification => (\r\n                     <ListGroup.Item key={notification.id} action onClick={(e) => handleNotificationClick(notification, e)} className={`bg-dark text-light border-secondary px-3 py-2 ${!notification.read_at ? 'bg-opacity-75 fw-bold notification-unread' : 'notification-read'}`} style={{ cursor: 'pointer', opacity: !notification.read_at ? 1 : 0.7 }} >\r\n                       <div className=\"d-flex justify-content-between align-items-start\">\r\n                           <small style={{fontSize: '0.9em', marginRight: '5px'}}> {notification.data?.message || 'Notification message missing.'} </small>\r\n                            {!notification.read_at && ( <Button variant=\"outline-secondary\" size=\"sm\" className=\"ms-auto border-0 flex-shrink-0\" style={{ lineHeight: '1', padding: '0.1rem 0.3rem'}} onClick={(e) => handleMarkAsRead(notification.id, e)} title=\"Mark as read\"> <i className=\"bi bi-check-lg\"></i> </Button> )}\r\n                       </div>\r\n                       <small className=\"d-block text-muted\" style={{fontSize: '0.75em'}}> {formatDate(notification.created_at, { dateStyle: 'short', timeStyle: 'short' })} </small>\r\n                     </ListGroup.Item>\r\n                 ))}\r\n             </ListGroup>\r\n         )}\r\n         {/* Optional: Link to see all notifications */}\r\n      </Dropdown.Menu>\r\n    </Dropdown>\r\n  );\r\n}\r\n\r\nexport default NotificationBell;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}