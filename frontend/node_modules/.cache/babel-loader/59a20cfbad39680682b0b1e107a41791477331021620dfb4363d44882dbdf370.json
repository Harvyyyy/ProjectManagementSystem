{"ast":null,"code":"var _jsxFileName = \"D:\\\\Harvy\\\\Dev\\\\ProjectManagementSystem\\\\frontend\\\\src\\\\components\\\\Notifications\\\\NotificationBell.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Dropdown, Badge, Spinner, ListGroup, Button, Alert } from 'react-bootstrap';\n// Removed 'Link' from react-router-dom import\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext'; // Adjust path\nimport { API_BASE_URL } from '../../App'; // Adjust path\nimport { formatDate } from '../../utils/formatting'; // Adjust path\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NotificationBell() {\n  _s();\n  const {\n    token\n  } = useAuth();\n  const navigate = useNavigate();\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const fetchNotifications = useCallback(async (fetchType = 'unread') => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      var _data$meta$unread_cou, _data$meta;\n      const response = await fetch(`${API_BASE_URL}/notifications?status=${fetchType}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error ${response.status}`);\n      }\n      const data = await response.json();\n      console.log(\"Notifications Data:\", data);\n      setNotifications(data.data || []);\n      setUnreadCount((_data$meta$unread_cou = (_data$meta = data.meta) === null || _data$meta === void 0 ? void 0 : _data$meta.unread_count) !== null && _data$meta$unread_cou !== void 0 ? _data$meta$unread_cou : 0);\n    } catch (err) {\n      console.error(\"Failed to fetch notifications:\", err);\n      setError(\"Couldn't load notifications.\");\n      setUnreadCount(0);\n      setNotifications([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [token]);\n\n  // Initial fetch\n  useEffect(() => {\n    fetchNotifications('unread');\n    // Optional: Setup polling interval\n  }, [fetchNotifications]);\n  const handleToggle = nextShowState => {\n    setIsOpen(nextShowState);\n    if (nextShowState) {\n      fetchNotifications('all');\n    }\n  };\n  const handleMarkAsRead = async (notificationId, e) => {\n    e.stopPropagation();\n    const targetNotification = notifications.find(n => n.id === notificationId);\n    if (!targetNotification || targetNotification.read_at) return;\n\n    // Optimistic UI update\n    setNotifications(prev => prev.map(n => n.id === notificationId ? {\n      ...n,\n      read_at: new Date().toISOString()\n    } : n));\n    setUnreadCount(prev => Math.max(0, prev - 1));\n    try {\n      const response = await fetch(`${API_BASE_URL}/notifications/${notificationId}/read`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to mark as read on server');\n      }\n      // Optional: Re-fetch on success if optimistic update isn't fully trusted\n    } catch (err) {\n      console.error(\"Failed to mark notification as read:\", err);\n      setError(\"Failed to update notification status.\");\n      // Revert optimistic UI update on error\n      setNotifications(prev => prev.map(n => n.id === notificationId ? {\n        ...n,\n        read_at: null\n      } : n));\n      setUnreadCount(prev => prev + 1);\n    }\n  };\n  const handleNotificationClick = (notification, e) => {\n    var _notification$data;\n    if (!notification.read_at) {\n      handleMarkAsRead(notification.id, e);\n    }\n    if ((_notification$data = notification.data) !== null && _notification$data !== void 0 && _notification$data.url) {\n      navigate(notification.data.url);\n      setIsOpen(false);\n    }\n  };\n\n  // Custom Dropdown Toggle Component\n  const CustomToggle = /*#__PURE__*/React.forwardRef(({\n    children,\n    onClick\n  }, ref) => /*#__PURE__*/_jsxDEV(Button, {\n    ref: ref,\n    onClick: e => {\n      e.preventDefault();\n      onClick(e);\n    },\n    variant: \"dark\",\n    className: \"position-relative border-0 p-0 me-2\",\n    \"aria-label\": \"Notifications\",\n    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"bi bi-bell-fill text-white fs-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(Badge, {\n      pill: true,\n      bg: \"danger\",\n      className: \"position-absolute top-0 start-100 translate-middle\",\n      style: {\n        fontSize: '0.6em',\n        padding: '0.3em 0.5em'\n      },\n      children: [\" \", unreadCount > 9 ? '9+' : unreadCount, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\",\n        children: \"unread notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 210\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(Dropdown, {\n    onToggle: handleToggle,\n    show: isOpen,\n    align: \"end\",\n    children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n      as: CustomToggle,\n      id: \"dropdown-custom-components\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n      variant: \"dark\",\n      className: \"shadow mt-2 dropdown-menu-scrollable\",\n      style: {\n        minWidth: '300px',\n        maxHeight: '400px',\n        overflowY: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Dropdown.Header, {\n        className: \"d-flex justify-content-between align-items-center\",\n        children: \" Notifications \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 10\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center p-3 text-muted\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          size: \"sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 68\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 24\n      }, this), error && !isLoading && /*#__PURE__*/_jsxDEV(Dropdown.ItemText, {\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          size: \"sm\",\n          className: \"mb-0\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 34\n      }, this), !isLoading && !error && notifications.length === 0 && /*#__PURE__*/_jsxDEV(Dropdown.ItemText, {\n        className: \"text-muted text-center p-3\",\n        children: \"No new notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 67\n      }, this), !isLoading && !error && notifications.length > 0 && /*#__PURE__*/_jsxDEV(ListGroup, {\n        variant: \"flush\",\n        children: notifications.map(notification => {\n          var _notification$data2;\n          return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            action: true,\n            onClick: e => handleNotificationClick(notification, e),\n            className: `bg-dark text-light border-secondary px-3 py-2 ${!notification.read_at ? 'bg-opacity-75 fw-bold notification-unread' : 'notification-read'}`,\n            style: {\n              cursor: 'pointer',\n              opacity: !notification.read_at ? 1 : 0.7\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-start\",\n              children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                style: {\n                  fontSize: '0.9em',\n                  marginRight: '5px'\n                },\n                children: [\" \", ((_notification$data2 = notification.data) === null || _notification$data2 === void 0 ? void 0 : _notification$data2.message) || 'Notification message missing.', \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 28\n              }, this), !notification.read_at && /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline-secondary\",\n                size: \"sm\",\n                className: \"ms-auto border-0 flex-shrink-0\",\n                style: {\n                  lineHeight: '1',\n                  padding: '0.1rem 0.3rem'\n                },\n                onClick: e => handleMarkAsRead(notification.id, e),\n                title: \"Mark as read\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 275\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 57\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 24\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"d-block text-muted\",\n              style: {\n                fontSize: '0.75em'\n              },\n              children: [\" \", formatDate(notification.created_at, {\n                dateStyle: 'short',\n                timeStyle: 'short'\n              }), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 24\n            }, this)]\n          }, notification.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 22\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n_s(NotificationBell, \"QgVOi2Dd6d6fVwwELrP7FoUANlU=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = NotificationBell;\nexport default NotificationBell;\nvar _c;\n$RefreshReg$(_c, \"NotificationBell\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Dropdown","Badge","Spinner","ListGroup","Button","Alert","useNavigate","useAuth","API_BASE_URL","formatDate","jsxDEV","_jsxDEV","NotificationBell","_s","token","navigate","notifications","setNotifications","unreadCount","setUnreadCount","isLoading","setIsLoading","error","setError","isOpen","setIsOpen","fetchNotifications","fetchType","_data$meta$unread_cou","_data$meta","response","fetch","headers","Authorization","Accept","ok","Error","status","data","json","console","log","meta","unread_count","err","handleToggle","nextShowState","handleMarkAsRead","notificationId","e","stopPropagation","targetNotification","find","n","id","read_at","prev","map","Date","toISOString","Math","max","method","handleNotificationClick","notification","_notification$data","url","CustomToggle","forwardRef","children","onClick","ref","preventDefault","variant","className","fileName","_jsxFileName","lineNumber","columnNumber","pill","bg","style","fontSize","padding","onToggle","show","align","Toggle","as","Menu","minWidth","maxHeight","overflowY","Header","Divider","animation","size","ItemText","length","_notification$data2","Item","action","cursor","opacity","marginRight","message","lineHeight","title","created_at","dateStyle","timeStyle","_c","$RefreshReg$"],"sources":["D:/Harvy/Dev/ProjectManagementSystem/frontend/src/components/Notifications/NotificationBell.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Dropdown, Badge, Spinner, ListGroup, Button, Alert } from 'react-bootstrap';\r\n// Removed 'Link' from react-router-dom import\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext'; // Adjust path\r\nimport { API_BASE_URL } from '../../App'; // Adjust path\r\nimport { formatDate } from '../../utils/formatting'; // Adjust path\r\n\r\nfunction NotificationBell() {\r\n  const { token } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const fetchNotifications = useCallback(async (fetchType = 'unread') => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/notifications?status=${fetchType}`, {\r\n        headers: { Authorization: `Bearer ${token}`, Accept: 'application/json' },\r\n      });\r\n      if (!response.ok) { throw new Error(`HTTP error ${response.status}`); }\r\n      const data = await response.json();\r\n      console.log(\"Notifications Data:\", data);\r\n      setNotifications(data.data || []);\r\n      setUnreadCount(data.meta?.unread_count ?? 0);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch notifications:\", err);\r\n      setError(\"Couldn't load notifications.\");\r\n      setUnreadCount(0);\r\n      setNotifications([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [token]);\r\n\r\n  // Initial fetch\r\n  useEffect(() => {\r\n    fetchNotifications('unread');\r\n    // Optional: Setup polling interval\r\n  }, [fetchNotifications]);\r\n\r\n  const handleToggle = (nextShowState) => {\r\n     setIsOpen(nextShowState);\r\n     if (nextShowState) { fetchNotifications('all'); }\r\n  };\r\n\r\n  const handleMarkAsRead = async (notificationId, e) => {\r\n      e.stopPropagation();\r\n      const targetNotification = notifications.find(n => n.id === notificationId);\r\n      if (!targetNotification || targetNotification.read_at) return;\r\n\r\n      // Optimistic UI update\r\n      setNotifications(prev => prev.map(n => n.id === notificationId ? { ...n, read_at: new Date().toISOString() } : n));\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n\r\n      try {\r\n          const response = await fetch(`${API_BASE_URL}/notifications/${notificationId}/read`, {\r\n              method: 'POST',\r\n              headers: { Authorization: `Bearer ${token}`, Accept: 'application/json', 'Content-Type': 'application/json' },\r\n          });\r\n          if (!response.ok) { throw new Error('Failed to mark as read on server'); }\r\n          // Optional: Re-fetch on success if optimistic update isn't fully trusted\r\n      } catch (err) {\r\n          console.error(\"Failed to mark notification as read:\", err);\r\n          setError(\"Failed to update notification status.\");\r\n          // Revert optimistic UI update on error\r\n          setNotifications(prev => prev.map(n => n.id === notificationId ? { ...n, read_at: null } : n));\r\n          setUnreadCount(prev => prev + 1);\r\n      }\r\n  };\r\n\r\n  const handleNotificationClick = (notification, e) => {\r\n    if (!notification.read_at) { handleMarkAsRead(notification.id, e); }\r\n    if (notification.data?.url) { navigate(notification.data.url); setIsOpen(false); }\r\n  };\r\n\r\n  // Custom Dropdown Toggle Component\r\n  const CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n    <Button ref={ref} onClick={(e) => { e.preventDefault(); onClick(e); }} variant=\"dark\" className=\"position-relative border-0 p-0 me-2\" aria-label=\"Notifications\">\r\n      <i className=\"bi bi-bell-fill text-white fs-5\"></i>\r\n      {unreadCount > 0 && ( <Badge pill bg=\"danger\" className=\"position-absolute top-0 start-100 translate-middle\" style={{ fontSize: '0.6em', padding: '0.3em 0.5em' }}> {unreadCount > 9 ? '9+' : unreadCount} <span className=\"visually-hidden\">unread notifications</span> </Badge> )}\r\n    </Button>\r\n  ));\r\n\r\n  return (\r\n    <Dropdown onToggle={handleToggle} show={isOpen} align=\"end\">\r\n      <Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\" />\r\n      <Dropdown.Menu variant=\"dark\" className=\"shadow mt-2 dropdown-menu-scrollable\" style={{minWidth: '300px', maxHeight: '400px', overflowY: 'auto'}}>\r\n         <Dropdown.Header className=\"d-flex justify-content-between align-items-center\"> Notifications </Dropdown.Header>\r\n         <Dropdown.Divider />\r\n         {isLoading && <div className=\"text-center p-3 text-muted\"><Spinner animation=\"border\" size=\"sm\" /></div>}\r\n         {error && !isLoading && <Dropdown.ItemText><Alert variant=\"danger\" size=\"sm\" className=\"mb-0\">{error}</Alert></Dropdown.ItemText>}\r\n         {!isLoading && !error && notifications.length === 0 && ( <Dropdown.ItemText className=\"text-muted text-center p-3\">No new notifications</Dropdown.ItemText> )}\r\n         {!isLoading && !error && notifications.length > 0 && (\r\n             <ListGroup variant=\"flush\">\r\n                 {notifications.map(notification => (\r\n                     <ListGroup.Item key={notification.id} action onClick={(e) => handleNotificationClick(notification, e)} className={`bg-dark text-light border-secondary px-3 py-2 ${!notification.read_at ? 'bg-opacity-75 fw-bold notification-unread' : 'notification-read'}`} style={{ cursor: 'pointer', opacity: !notification.read_at ? 1 : 0.7 }} >\r\n                       <div className=\"d-flex justify-content-between align-items-start\">\r\n                           <small style={{fontSize: '0.9em', marginRight: '5px'}}> {notification.data?.message || 'Notification message missing.'} </small>\r\n                            {!notification.read_at && ( <Button variant=\"outline-secondary\" size=\"sm\" className=\"ms-auto border-0 flex-shrink-0\" style={{ lineHeight: '1', padding: '0.1rem 0.3rem'}} onClick={(e) => handleMarkAsRead(notification.id, e)} title=\"Mark as read\"> <i className=\"bi bi-check-lg\"></i> </Button> )}\r\n                       </div>\r\n                       <small className=\"d-block text-muted\" style={{fontSize: '0.75em'}}> {formatDate(notification.created_at, { dateStyle: 'short', timeStyle: 'short' })} </small>\r\n                     </ListGroup.Item>\r\n                 ))}\r\n             </ListGroup>\r\n         )}\r\n         {/* Optional: Link to see all notifications (Would need Link import back) */}\r\n         {/* <Dropdown.Divider /> */}\r\n         {/* <Dropdown.Item as={Link} to=\"/notifications\" className=\"text-center text-info\">View All</Dropdown.Item> */}\r\n      </Dropdown.Menu>\r\n    </Dropdown>\r\n  );\r\n}\r\n\r\nexport default NotificationBell;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,QAAQ,EAAEC,KAAK,EAAEC,OAAO,EAAEC,SAAS,EAAEC,MAAM,EAAEC,KAAK,QAAQ,iBAAiB;AACpF;AACA,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,QAAQ,2BAA2B,CAAC,CAAC;AACrD,SAASC,YAAY,QAAQ,WAAW,CAAC,CAAC;AAC1C,SAASC,UAAU,QAAQ,wBAAwB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAErD,SAASC,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EAC1B,MAAM;IAAEC;EAAM,CAAC,GAAGP,OAAO,CAAC,CAAC;EAC3B,MAAMQ,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACU,aAAa,EAAEC,gBAAgB,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACuB,SAAS,EAAEC,YAAY,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACyB,KAAK,EAAEC,QAAQ,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC2B,MAAM,EAAEC,SAAS,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EAE3C,MAAM6B,kBAAkB,GAAG3B,WAAW,CAAC,OAAO4B,SAAS,GAAG,QAAQ,KAAK;IACrEN,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MAAA,IAAAK,qBAAA,EAAAC,UAAA;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGvB,YAAY,yBAAyBmB,SAAS,EAAE,EAAE;QAChFK,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUnB,KAAK,EAAE;UAAEoB,MAAM,EAAE;QAAmB;MAC1E,CAAC,CAAC;MACF,IAAI,CAACJ,QAAQ,CAACK,EAAE,EAAE;QAAE,MAAM,IAAIC,KAAK,CAAC,cAAcN,QAAQ,CAACO,MAAM,EAAE,CAAC;MAAE;MACtE,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEH,IAAI,CAAC;MACxCrB,gBAAgB,CAACqB,IAAI,CAACA,IAAI,IAAI,EAAE,CAAC;MACjCnB,cAAc,EAAAS,qBAAA,IAAAC,UAAA,GAACS,IAAI,CAACI,IAAI,cAAAb,UAAA,uBAATA,UAAA,CAAWc,YAAY,cAAAf,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;IAC9C,CAAC,CAAC,OAAOgB,GAAG,EAAE;MACZJ,OAAO,CAAClB,KAAK,CAAC,gCAAgC,EAAEsB,GAAG,CAAC;MACpDrB,QAAQ,CAAC,8BAA8B,CAAC;MACxCJ,cAAc,CAAC,CAAC,CAAC;MACjBF,gBAAgB,CAAC,EAAE,CAAC;IACtB,CAAC,SAAS;MACRI,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC,EAAE,CAACP,KAAK,CAAC,CAAC;;EAEX;EACAhB,SAAS,CAAC,MAAM;IACd4B,kBAAkB,CAAC,QAAQ,CAAC;IAC5B;EACF,CAAC,EAAE,CAACA,kBAAkB,CAAC,CAAC;EAExB,MAAMmB,YAAY,GAAIC,aAAa,IAAK;IACrCrB,SAAS,CAACqB,aAAa,CAAC;IACxB,IAAIA,aAAa,EAAE;MAAEpB,kBAAkB,CAAC,KAAK,CAAC;IAAE;EACnD,CAAC;EAED,MAAMqB,gBAAgB,GAAG,MAAAA,CAAOC,cAAc,EAAEC,CAAC,KAAK;IAClDA,CAAC,CAACC,eAAe,CAAC,CAAC;IACnB,MAAMC,kBAAkB,GAAGnC,aAAa,CAACoC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKN,cAAc,CAAC;IAC3E,IAAI,CAACG,kBAAkB,IAAIA,kBAAkB,CAACI,OAAO,EAAE;;IAEvD;IACAtC,gBAAgB,CAACuC,IAAI,IAAIA,IAAI,CAACC,GAAG,CAACJ,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKN,cAAc,GAAG;MAAE,GAAGK,CAAC;MAAEE,OAAO,EAAE,IAAIG,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IAAE,CAAC,GAAGN,CAAC,CAAC,CAAC;IAClHlC,cAAc,CAACqC,IAAI,IAAII,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEL,IAAI,GAAG,CAAC,CAAC,CAAC;IAE7C,IAAI;MACA,MAAM1B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGvB,YAAY,kBAAkBwC,cAAc,OAAO,EAAE;QACjFc,MAAM,EAAE,MAAM;QACd9B,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUnB,KAAK,EAAE;UAAEoB,MAAM,EAAE,kBAAkB;UAAE,cAAc,EAAE;QAAmB;MAChH,CAAC,CAAC;MACF,IAAI,CAACJ,QAAQ,CAACK,EAAE,EAAE;QAAE,MAAM,IAAIC,KAAK,CAAC,kCAAkC,CAAC;MAAE;MACzE;IACJ,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACVJ,OAAO,CAAClB,KAAK,CAAC,sCAAsC,EAAEsB,GAAG,CAAC;MAC1DrB,QAAQ,CAAC,uCAAuC,CAAC;MACjD;MACAN,gBAAgB,CAACuC,IAAI,IAAIA,IAAI,CAACC,GAAG,CAACJ,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKN,cAAc,GAAG;QAAE,GAAGK,CAAC;QAAEE,OAAO,EAAE;MAAK,CAAC,GAAGF,CAAC,CAAC,CAAC;MAC9FlC,cAAc,CAACqC,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;IACpC;EACJ,CAAC;EAED,MAAMO,uBAAuB,GAAGA,CAACC,YAAY,EAAEf,CAAC,KAAK;IAAA,IAAAgB,kBAAA;IACnD,IAAI,CAACD,YAAY,CAACT,OAAO,EAAE;MAAER,gBAAgB,CAACiB,YAAY,CAACV,EAAE,EAAEL,CAAC,CAAC;IAAE;IACnE,KAAAgB,kBAAA,GAAID,YAAY,CAAC1B,IAAI,cAAA2B,kBAAA,eAAjBA,kBAAA,CAAmBC,GAAG,EAAE;MAAEnD,QAAQ,CAACiD,YAAY,CAAC1B,IAAI,CAAC4B,GAAG,CAAC;MAAEzC,SAAS,CAAC,KAAK,CAAC;IAAE;EACnF,CAAC;;EAED;EACA,MAAM0C,YAAY,gBAAGvE,KAAK,CAACwE,UAAU,CAAC,CAAC;IAAEC,QAAQ;IAAEC;EAAQ,CAAC,EAAEC,GAAG,kBAC/D5D,OAAA,CAACP,MAAM;IAACmE,GAAG,EAAEA,GAAI;IAACD,OAAO,EAAGrB,CAAC,IAAK;MAAEA,CAAC,CAACuB,cAAc,CAAC,CAAC;MAAEF,OAAO,CAACrB,CAAC,CAAC;IAAE,CAAE;IAACwB,OAAO,EAAC,MAAM;IAACC,SAAS,EAAC,qCAAqC;IAAC,cAAW,eAAe;IAAAL,QAAA,gBAC9J1D,OAAA;MAAG+D,SAAS,EAAC;IAAiC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAClD5D,WAAW,GAAG,CAAC,iBAAMP,OAAA,CAACV,KAAK;MAAC8E,IAAI;MAACC,EAAE,EAAC,QAAQ;MAACN,SAAS,EAAC,oDAAoD;MAACO,KAAK,EAAE;QAAEC,QAAQ,EAAE,OAAO;QAAEC,OAAO,EAAE;MAAc,CAAE;MAAAd,QAAA,GAAC,GAAC,EAACnD,WAAW,GAAG,CAAC,GAAG,IAAI,GAAGA,WAAW,EAAC,GAAC,eAAAP,OAAA;QAAM+D,SAAS,EAAC,iBAAiB;QAAAL,QAAA,EAAC;MAAoB;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,KAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAG;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC7Q,CACT,CAAC;EAEF,oBACEnE,OAAA,CAACX,QAAQ;IAACoF,QAAQ,EAAEvC,YAAa;IAACwC,IAAI,EAAE7D,MAAO;IAAC8D,KAAK,EAAC,KAAK;IAAAjB,QAAA,gBACzD1D,OAAA,CAACX,QAAQ,CAACuF,MAAM;MAACC,EAAE,EAAErB,YAAa;MAACb,EAAE,EAAC;IAA4B;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACrEnE,OAAA,CAACX,QAAQ,CAACyF,IAAI;MAAChB,OAAO,EAAC,MAAM;MAACC,SAAS,EAAC,sCAAsC;MAACO,KAAK,EAAE;QAACS,QAAQ,EAAE,OAAO;QAAEC,SAAS,EAAE,OAAO;QAAEC,SAAS,EAAE;MAAM,CAAE;MAAAvB,QAAA,gBAC9I1D,OAAA,CAACX,QAAQ,CAAC6F,MAAM;QAACnB,SAAS,EAAC,mDAAmD;QAAAL,QAAA,EAAC;MAAe;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAiB,CAAC,eAChHnE,OAAA,CAACX,QAAQ,CAAC8F,OAAO;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACnB1D,SAAS,iBAAIT,OAAA;QAAK+D,SAAS,EAAC,4BAA4B;QAAAL,QAAA,eAAC1D,OAAA,CAACT,OAAO;UAAC6F,SAAS,EAAC,QAAQ;UAACC,IAAI,EAAC;QAAI;UAAArB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EACvGxD,KAAK,IAAI,CAACF,SAAS,iBAAIT,OAAA,CAACX,QAAQ,CAACiG,QAAQ;QAAA5B,QAAA,eAAC1D,OAAA,CAACN,KAAK;UAACoE,OAAO,EAAC,QAAQ;UAACuB,IAAI,EAAC,IAAI;UAACtB,SAAS,EAAC,MAAM;UAAAL,QAAA,EAAE/C;QAAK;UAAAqD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAmB,CAAC,EAChI,CAAC1D,SAAS,IAAI,CAACE,KAAK,IAAIN,aAAa,CAACkF,MAAM,KAAK,CAAC,iBAAMvF,OAAA,CAACX,QAAQ,CAACiG,QAAQ;QAACvB,SAAS,EAAC,4BAA4B;QAAAL,QAAA,EAAC;MAAoB;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAmB,CAAG,EAC5J,CAAC1D,SAAS,IAAI,CAACE,KAAK,IAAIN,aAAa,CAACkF,MAAM,GAAG,CAAC,iBAC7CvF,OAAA,CAACR,SAAS;QAACsE,OAAO,EAAC,OAAO;QAAAJ,QAAA,EACrBrD,aAAa,CAACyC,GAAG,CAACO,YAAY;UAAA,IAAAmC,mBAAA;UAAA,oBAC3BxF,OAAA,CAACR,SAAS,CAACiG,IAAI;YAAuBC,MAAM;YAAC/B,OAAO,EAAGrB,CAAC,IAAKc,uBAAuB,CAACC,YAAY,EAAEf,CAAC,CAAE;YAACyB,SAAS,EAAE,iDAAiD,CAACV,YAAY,CAACT,OAAO,GAAG,2CAA2C,GAAG,mBAAmB,EAAG;YAAC0B,KAAK,EAAE;cAAEqB,MAAM,EAAE,SAAS;cAAEC,OAAO,EAAE,CAACvC,YAAY,CAACT,OAAO,GAAG,CAAC,GAAG;YAAI,CAAE;YAAAc,QAAA,gBACrU1D,OAAA;cAAK+D,SAAS,EAAC,kDAAkD;cAAAL,QAAA,gBAC7D1D,OAAA;gBAAOsE,KAAK,EAAE;kBAACC,QAAQ,EAAE,OAAO;kBAAEsB,WAAW,EAAE;gBAAK,CAAE;gBAAAnC,QAAA,GAAC,GAAC,EAAC,EAAA8B,mBAAA,GAAAnC,YAAY,CAAC1B,IAAI,cAAA6D,mBAAA,uBAAjBA,mBAAA,CAAmBM,OAAO,KAAI,+BAA+B,EAAC,GAAC;cAAA;gBAAA9B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,EAC9H,CAACd,YAAY,CAACT,OAAO,iBAAM5C,OAAA,CAACP,MAAM;gBAACqE,OAAO,EAAC,mBAAmB;gBAACuB,IAAI,EAAC,IAAI;gBAACtB,SAAS,EAAC,gCAAgC;gBAACO,KAAK,EAAE;kBAAEyB,UAAU,EAAE,GAAG;kBAAEvB,OAAO,EAAE;gBAAe,CAAE;gBAACb,OAAO,EAAGrB,CAAC,IAAKF,gBAAgB,CAACiB,YAAY,CAACV,EAAE,EAAEL,CAAC,CAAE;gBAAC0D,KAAK,EAAC,cAAc;gBAAAtC,QAAA,GAAC,GAAC,eAAA1D,OAAA;kBAAG+D,SAAS,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAG;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpS,CAAC,eACNnE,OAAA;cAAO+D,SAAS,EAAC,oBAAoB;cAACO,KAAK,EAAE;gBAACC,QAAQ,EAAE;cAAQ,CAAE;cAAAb,QAAA,GAAC,GAAC,EAAC5D,UAAU,CAACuD,YAAY,CAAC4C,UAAU,EAAE;gBAAEC,SAAS,EAAE,OAAO;gBAAEC,SAAS,EAAE;cAAQ,CAAC,CAAC,EAAC,GAAC;YAAA;cAAAnC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA,GAL3Id,YAAY,CAACV,EAAE;YAAAqB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAMpB,CAAC;QAAA,CACpB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CACd;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAIW,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEf;AAACjE,EAAA,CA5GQD,gBAAgB;EAAA,QACLL,OAAO,EACRD,WAAW;AAAA;AAAAyG,EAAA,GAFrBnG,gBAAgB;AA8GzB,eAAeA,gBAAgB;AAAC,IAAAmG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}